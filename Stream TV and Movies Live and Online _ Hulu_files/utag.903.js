//tealium universal tag - utag.903 ut4.0.202112210754, Copyright 2021 Tealium.com Inc. All Rights Reserved.
function __readRMCookie(n){for(var r=n+"=",t=document.cookie.split(";"),e=0;e<t.length;e++){for(var i=t[e];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(r))return i.substring(r.length,i.length)}return""}
function __readRMCookiev2(e,o){o=o||"rmStore";for(var r=__readRMCookie(o);r!==decodeURIComponent(r);)r=decodeURIComponent(r);for(var t=r.split("|"),n=0;n<t.length;n++){var i=t[n].split(":")[0],d=t[n].split(":")[1];if(i===e)return d}return""}
function __readParam(e,o,r,a){var i=o||"",n=r||"",t=a||{},_=__readRMCookiev2(e||""),f=t[i],s=(_=t.ignoreCookie||!1?0:_)||f||n;return s=("string"!=typeof s||"false"!==s.toLowerCase())&&s}
function sRAN(){var e=DataLayer&&DataLayer.Sale&&DataLayer.Sale.Basket?DataLayer.Sale.Basket:{},a=e.affiliateConfig||{},t=__readParam("atm","tagType","pixel",a),r=__readParam("adr","discountType","order",a),o=__readParam("acs","includeStatus","false",a),i=__readParam("arto","removeOrderTax","false",a),n=__readParam("artp","removeTaxFromProducts","false",a),u=__readParam("artd","removeTaxFromDiscount","false",a),s=__readParam("atr","taxRate",0,a);s=Number(s);var m=__readParam("ald","land",!1,{})||(a.land&&!0===a.land?__readRMCookie("ranLandDateTime"):a.land)||!1,l=__readParam("atrv","tr",!1,{})||(a.tr&&!0===a.tr?__readRMCookie("ranSiteID"):a.tr)||!1,d=!1,c=__readParam("amid","ranMID","",a)||e.ranMID;if(!c)return!1;if(!(void 0===a.allowCommission||"false"!==a.allowCommission))return!1;var p=e.orderid||"OrderNumberNotAvailable",N="",b="",_="",v="",y=e.currency||"";y=y.toUpperCase();var P=e.taxAmount?Math.abs(Math.round(100*Number(e.taxAmount))):0,T=e.discountAmount?Math.abs(Math.round(100*Number(e.discountAmount))):0;if(u&&s){var f=(100+Number(s))/100;T=Math.round(T/f)}var x="pixel"===t?"ep":"mop"===t?"eventnvppixel":"ep",h=e.customerStatus||"",C=document.location.protocol+"//track.linksynergy.com/"+x+"?",D="";null!=h&&""!=h&&(o&&"EXISTING"==h.toUpperCase()||o&&"RETURNING"==h.toUpperCase())&&(D="R_");for(var L=[],S=0,R=0;R<(e.lineitems?e.lineitems.length:0);R++){for(var g=!1,I=window.JSON?JSON.parse(JSON.stringify(e.lineitems[R])):e.lineitems[R],U=0;U<L.length;U++){L[U].SKU===I.SKU&&(g=!0,L[U].quantity=Number(L[U].quantity)+Number(I.quantity),L[U].totalValueLessTax=Number(L[U].totalValueLessTax)+Number(I.quantity)*Number(I.unitPriceLessTax),L[U].totalValue=Number(L[U].totalValue)+Number(I.quantity)*Number(I.unitPrice))}g||(I.totalValue=Number(I.quantity)*Number(I.unitPrice),I.totalValueLessTax=Number(I.quantity)*Number(I.unitPriceLessTax),L.push(I)),S+=Number(I.quantity)*Number(I.unitPriceLessTax||I.unitPrice)*100}var A={};for(R=0;R<L.length;R++){I=L[R];var O=encodeURIComponent(I.SKU),w=I.totalValueLessTax||I.totalValue,M=I.quantity,q=encodeURIComponent(I.productName)||"",V=Math.round(100*Number(w));if(n&&s&&(!I.unitPriceLessTax||I.unitPriceLessTax===I.unitPrice))V/=f=(100+s)/100;"item"===r.toLowerCase()&&T&&(V-=T*V/S);var k=I.optionalData;for(var E in k)k.hasOwnProperty(E)&&(A[E]=A[E]||"",A[E]+=encodeURIComponent(k[E])+"|");N+=D+O+"|",b+=M+"|",_+=Math.round(V)+"|",v+=D+q+"|"}N=N.slice(0,-1),b=b.slice(0,-1),_=_.slice(0,-1),v=v.slice(0,-1),T&&"order"===r.toLowerCase()?(N+="|"+D+"DISCOUNT",v+="|"+D+"DISCOUNT",b+="|0",_+="|-"+T):T&&"item"===r.toLowerCase()&&(d=!0),i&&P&&(N+="|"+D+"ORDERTAX",b+="|0",_+="|-"+P,v+="|"+D+"ORDERTAX"),C+="mid="+c+"&ord="+p+"&skulist="+N+"&qlist="+b+"&amtlist="+_+"&cur="+y+"&namelist="+v+"&catlist="+e.customerID+"&img=1&",m&&(C+="land="+m+"&"),l&&(C+="tr="+l+"&"),d&&(C+="discount="+T+"&");k=e.optionalData||{};for(var E in e.discountCode&&(k.coupon=e.discountCode),e.customerStatus&&(k.custstatus=e.customerStatus),e.customerID&&(k.custid=e.customerID),T&&(k.disamt=T),k)k.hasOwnProperty(E)&&(C+=E+"="+encodeURIComponent(k[E])+"&");for(var E in A)A.hasOwnProperty(E)&&(C+=E+"list="+A[E].slice(0,-1)+"&");"&"===C[C.length-1]&&(C=C.slice(0,-1)),2037<C.length&&(C=C.slice(0,2037),C+="&trunc=true");var B,J=document.createElement("img");J.setAttribute("src",C),J.setAttribute("height","1px"),J.setAttribute("width","1px"),(B=document.getElementsByTagName("script")[0]).parentNode.insertBefore(J,B)}
function sDisplay(){var e=null,a=e,i=e,r=e,t=e,n=window.DataLayer&&window.DataLayer.Sale&&window.DataLayer.Sale.Basket?window.DataLayer.Sale.Basket:{},d=n.displayConfig||{},s=n.customerStatus||"",m=n.discountAmount?Math.abs(Number(n.discountAmount)):0,o=e,l="",u=__readParam("dmid","rdMID","",d);if(!u)return!1;var c=__readParam("dtm","tagType","js",d),p="if"===(c="js"===c||"if"===c||"img"===c?c:"js")?"iframe":"img"===c?c:"script",y="//"+__readParam("ddn","domain","tags.rd.linksynergy.com",d)+"/"+c+"/"+u,f=__readParam("dis","includeStatus","false",d),N=__readParam("dcomm","allowCommission","notset",d);"true"===N||!0===N||"1"===N||1===N?l="1":"false"!==N&&!1!==N&&"0"!==N&&0!==N||(l="0");var _="";if(null!=s&&""!=s&&(f&&"EXISTING"==s.toUpperCase()||f&&"RETURNING"==s.toUpperCase())&&(_="R_"),!n.orderid||!n.conversionType)return!1;r=0,i=_+n.orderid,a="",t="conv",o=n.currency;for(var b=0;b<(n.lineitems?n.lineitems.length:0);b++)r+=Number(n.lineitems[b].unitPriceLessTax)*Number(n.lineitems[b].quantity)||Number(n.lineitems[b].unitPrice)*Number(n.lineitems[b].quantity),a+=encodeURIComponent(n.lineitems[b].SKU)+",";r=Math.round(100*(r-m))/100,a=a.slice(0,-1),t&&(y=-1<y.indexOf("?")?y+"&pt="+t:y+"/?pt="+t),a&&(y=-1<y.indexOf("?")?y+"&prodID="+a:y+"/?prodID="+a),i&&(y=-1<y.indexOf("?")?y+"&orderNumber="+i:y+"/?orderNumber="+i),r&&(y=-1<y.indexOf("?")?y+"&price="+r:y+"/?price="+r),o&&(y=-1<y.indexOf("?")?y+"&cur="+o:y+"/?cur="+o),l&&(y=-1<y.indexOf("?")?y+"&tvalid="+l:y+"/?tvalid="+l);var v=document.createElement(p);v.src=y,"script"===p?v.type="text/javascript":"iframe"===p&&v.setAttribute("style","display: none;"),document.getElementsByTagName("body")[0].appendChild(v)}
function sSearch(){var i=window.DataLayer&&window.DataLayer.Sale&&window.DataLayer.Sale.Basket?window.DataLayer.Sale.Basket:{},d=i.searchConfig||{},c=__readParam("smid","rsMID","",d);if(!c)return!1;var e=function(){var e=i.discountAmount?Math.abs(Number(i.discountAmount)):0,a=__readParam("sct","conversionType","conv",d),t=0,r="";if(!i.orderid)return!1;t=0,r=i.orderid;for(var n=0;n<(i.lineitems?i.lineitems.length:0);n++)t+=Number(i.lineitems[n].unitPrice)*Number(i.lineitems[n].quantity);t=Math.round(100*(t-e))/100;window.DataLayer.Sale.Basket;var o=[];o[0]="id="+c,o[1]="type="+a,o[2]="val="+t,o[3]="orderId="+r,o[4]="promoCode="+i.discountCode||"",o[5]="valueCurrency="+i.currency||"USD",o[6]="GCID=",o[7]="kw=",o[8]="product=",k_trackevent(o,"113")},a=-1<document.location.protocol.indexOf("s")?"https://":"http://";a+="113.xg4ken.com/media/getpx.php?cid="+c;var t=document.createElement("script");t.type="text/javascript",t.src=a,t.onload=e,t.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||e()},document.getElementsByTagName("head")[0].appendChild(t)}
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
if(utag.ut.loader===undefined){u.loader=function(o){var b,c,l,a=document;if(o.type==="iframe"){b=a.createElement("iframe");o.attrs=o.attrs||{"height":"1","width":"1","style":"display:none"};for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";for(l in utag.loader.GV(o.attrs)){b[l]=o.attrs[l];}b.src=o.src;}if(o.id){b.id=o.id};if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb()},false);}else{b.onreadystatechange=function(){if(this.readyState=='complete'||this.readyState=='loaded'){this.onreadystatechange=null;o.cb()}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b)}}}}else{u.loader=utag.ut.loader;}
if(utag.ut.typeOf===undefined){u.typeOf=function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();};}else{u.typeOf=utag.ut.typeOf;}
u.ev={"view":1,"link":1};u.initialized=false;u.map_func=function(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){u.map_func(arr,obj[i],item);}else{obj[i]=item;}};u.callBack=function(a,b,c){utag.DB("send:903:CALLBACK");u.initialized=true;u.data.affiliateConfig=u.data.affiliateConfig||{};u.data.displayConfig=u.data.displayConfig||{};u.data.searchConfig=u.data.searchConfig||{};u.data.optionalData=u.data.optionalData||{};u.data.affiliateConfig.allowCommission=u.data.allowCommission||"true";u.data.affiliateConfig.ranMID=u.data.affiliateConfig.ranMID||u.data.ranMID;u.data.affiliateConfig.taxRate=u.data.affiliateConfig.taxRate||u.data.taxRate;u.data.displayConfig.rdMID=u.data.displayConfig.rdMID||u.data.rdMID;u.data.searchConfig.rsMID=u.data.searchConfig.rsMID||u.data.rsMID;u.data.searchConfig.conversionType=u.data.searchConfig.conversionType||u.data.conversionType||"sale";if(u.data.order_id){var g={};g.orderid=u.data.order_id;g.currency=u.data.order_currency;g.customerStatus=u.data.customerStatus||"";g.conversionType=u.data.conversionType||"Sale";g.customerID=u.data.customer_id;g.discountCode=u.data.order_coupon_code;g.discountAmount=u.data.discountAmount||0;if(u.data.order_tax&&u.data.order_subtotal){g.taxAmount=(u.data.order_subtotal*(u.data.order_tax/100)).toFixed(2);}
if(u.data.product_id.length>0){g.lineitems=[];}
var product_sku=u.data.product_sku.length>0?u.data.product_sku:u.data.product_id;for(var i=0;i<product_sku.length;i++){u.data.item={};u.data.item.quantity=u.data.product_quantity[i];if(u.data.order_tax&&u.data.product_unit_price[i]){u.data.item.unitPrice=(parseFloat(u.data.product_unit_price[i])+
(parseFloat(u.data.product_unit_price[i])*(parseFloat(u.data.order_tax)/100))).toFixed(2);}
if(u.data.product_unit_price[i]){u.data.item.unitPriceLessTax=u.data.product_unit_price[i];}
u.data.item.SKU=product_sku[i];u.data.item.productName=u.data.product_name[i];g.lineitems.push(u.data.item);}
if(!utag.ut.isEmptyObject(u.data.affiliateConfig)){g.affiliateConfig=u.data.affiliateConfig;}
if(!utag.ut.isEmptyObject(u.data.displayConfig)){g.displayConfig=u.data.displayConfig;}
if(!utag.ut.isEmptyObject(u.data.searchConfig)){g.searchConfig=u.data.searchConfig;}
if(!utag.ut.isEmptyObject(u.data.optionalData)){g.optionalData=u.data.optionalData;}
window.rm_trans=g;if(!window.DataLayer){window.DataLayer={Sale:{Basket:rm_trans}};}else{DataLayer.Sale=DataLayer.Sale||{Basket:rm_trans};DataLayer.Sale.Basket=DataLayer.Sale.Basket||rm_trans}DataLayer.Sale.Basket.Ready=true;sRAN();sDisplay();sSearch();}
utag.DB("send:903:CALLBACK:COMPLETE");};u.map={"rakuten_ranMID":"affiliateConfig.ranMID","rakuten_discountType":"affiliateConfig.discountType","rakuten_conversionType":"conversionType","_cprodname":"product_name,product_id","currency":"order_currency","rakuten_quantity":"product_quantity","product_price":"order_subtotal,product_unit_price","_corder":"order_id","trial_duration":"customer_id,product_category","rakuten_tax":"order_tax"};u.extend=[function(a,b,c,d,e,f,g){if(1){d=b['product_id'];if(typeof d=='undefined')return;c=[{'1':'6.99'},{'2':'12.99'},{'3':'69.99'},{'11':'13.99'},{'13':'19.99'},{'14':'69.99'},{'15':'75.99'}];if(typeof b['product_price']==='undefined'){b['product_price']=[];}for(var h=0;h<d.length;h++){var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d[h]==f){b['product_price'][h]=c[e][f];m=true};};if(m)break};if(!m)b['product_price'][h]='6.99';};}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f;u.data={"qsp_delim":"&","kvp_delim":"=","base_url":"//intljs.rmtag.com/{##utag_trackingKey##}.ct.js","trackingKey":"115168","allowCommission":"true","ranMID":"","taxRate":"","rdMID":"","rsMID":"","conversionType":"","lineitems":[],"item":{},"affiliateConfig":{},"displayConfig":{},"searchConfig":{},"optionalData":{},"product_id":[],"product_name":[],"product_quantity":[],"product_sku":[],"product_unit_price":[],"product_discount":[]};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};c=[];for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.map_func(e[f].split("."),u.data,b[d]);}}}
u.data.order_id=u.data.order_id||b._corder||"";u.data.order_subtotal=u.data.order_subtotal||b._csubtotal||"";u.data.order_tax=u.data.order_tax||b._ctax||"";u.data.order_currency=u.data.order_currency||b._ccurrency||"";u.data.order_coupon_code=u.data.order_coupon_code||b._cpromo||"";u.data.customer_id=u.data.customer_id||b._ccustid||"";if(u.data.product_id.length===0&&b._cprod!==undefined){u.data.product_id=b._cprod.slice(0);}
if(u.data.product_name.length===0&&b._cprodname!==undefined){u.data.product_name=b._cprodname.slice(0);}
if(u.data.product_quantity.length===0&&b._cquan!==undefined){u.data.product_quantity=b._cquan.slice(0);}
if(u.data.product_sku.length===0&&b._csku!==undefined){u.data.product_sku=b._csku.slice(0);}
if(u.data.product_unit_price.length===0&&b._cprice!==undefined){u.data.product_unit_price=b._cprice.slice(0);}
if(u.data.product_discount.length===0&&b._cpdisc!==undefined){u.data.product_discount=b._cpdisc.slice(0);}
if(b["cp.CONSENTMGR"]&&b["cp.CONSENTMGR"].indexOf("consent:true")>-1){window.tealium_consent=1;}
u.data.base_url=u.data.base_url.replace("{##utag_trackingKey##}",u.data.trackingKey);if(!u.initialized){u.loader({"type":"script","src":u.data.base_url,"cb":u.callBack,"loc":"script","id":"utag_903","attrs":{}});}else{u.callBack();}
}};utag.o[loader].loader.LOAD(id);}("903","hulu.main"));}catch(error){utag.DB(error);}
